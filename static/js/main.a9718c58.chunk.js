(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(20),s=n.n(c),i=n(5),o=n(0);var l=function(e){var t=e.fields;return Object(o.jsxs)("form",{className:"d-flex",children:[Object(o.jsx)("select",{className:"form-select","aria-label":"Users properties",children:t.map((function(e){return Object(o.jsx)("option",{name:e.key,children:e.label},e.key)}))}),Object(o.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),Object(o.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})};var u=function(e){var t=e.container,n=e.fields,a=e.setCurrentContact;return Object(o.jsx)("header",{className:t,children:Object(o.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(o.jsxs)("div",{className:"container-fluid",children:[Object(o.jsx)("a",{className:"navbar-brand",href:"./",children:"Contacts"}),Object(o.jsx)(l,{fields:n}),Object(o.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){return a({})},"data-bs-toggle":"modal","data-bs-target":"#contactForm",children:"New contact"})]})})})},d=n(23),b=n(2),j=n.n(b),h=n(3),f=n(21),m=n(22),p=n(7),O=n.n(p),x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(f.a)(this,e),this.origin=t,this.pathname=n}return Object(m.a)(e,[{key:"origin",get:function(){return this._origin},set:function(e){this._origin=this._origin||e}},{key:"pathname",get:function(){return this._pathname},set:function(e){this._pathname=this._pathname||e}},{key:"href",get:function(){return this.origin+this.pathname}},{key:"create",value:function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post(this.href,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(h.a)(j.a.mark((function e(){var t,n,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.prev=1,e.next=4,O.a.get("".concat(this.href,"/").concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.put("".concat(this.href,"/").concat(t.id),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("".concat(this.href,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.status);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),v=n(10),y=n(8);var g=function(e){var t=e.field,n=e.contact,a=e.handleInputChange;return Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{className:"form-label",htmlFor:t.key,children:t.label}),Object(o.jsx)("input",{type:t.type||"text",className:"form-control",id:t.key,name:t.key,value:n[t.key],onChange:function(e){return a(e)},"aria-describedby":t.label})]})};var k=function(e){var t=e.title,n=e.fields,r=e.currentContact,c=e.submitContact,s=Object(a.useCallback)((function(e){return n.reduce((function(t,n){return t[n.key]=e[n.key]||"",t}),{id:r.id||null})}),[r,n]),l=Object(a.useState)(s(r)),u=Object(i.a)(l,2),d=u[0],b=u[1];function f(e){var t=e.target,n=t.name,a=t.value;b(Object(y.a)(Object(y.a)({},d),{},Object(v.a)({},n,a)))}return Object(a.useEffect)((function(){return b(s(r))}),[r,s]),Object(o.jsx)("div",{className:"modal fade",id:"contactForm",tabIndex:"-1","aria-labelledby":"contactFormLabel","aria-hidden":"true",children:Object(o.jsx)("form",{id:"contactFormDialog",className:"modal-dialog",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsx)("h5",{className:"modal-title",id:"contactFormLabel",children:t}),Object(o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(o.jsx)("div",{className:"modal-body",children:n.map((function(e){return e.calculate?"":Object(o.jsx)(g,{field:e,contact:d,handleInputChange:f},e.key)}))}),Object(o.jsxs)("div",{className:"modal-footer",children:[Object(o.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(o.jsx)("button",{formTarget:"contactFormDialog",type:"submit",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c(Object(y.a)(Object(y.a)({},d),{},{createAt:Date.now()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:t})]})]})})})};function C(e){var t=e.fields,n=e.book,a=e.currentPage,r=e.setCurrentContact;return n[a].map((function(e){return Object(o.jsx)("tr",{children:Object(o.jsx)(N,{fields:t,contact:e,setCurrentContact:r})},e.id)}))}function N(e){var t=e.fields,n=e.contact,a=e.setCurrentContact;return t.map((function(e,t){return t?Object(o.jsx)("td",{children:e.calculate&&e.calculate instanceof Function?e.calculate(n[e.key]):n[e.key]},e.key):Object(o.jsxs)("th",{scope:"row",children:[Object(o.jsx)("strong",{className:"row mx-1",children:n[e.key]}),Object(o.jsxs)("div",{className:"row flex-nowrap mx-1",onClick:function(){return a(n)},children:[Object(o.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#contactForm",className:"btn btn-sm btn-primary col-auto",children:"Edit"}),Object(o.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#confirmDelete",className:"btn btn-sm btn-danger col-auto mx-1",children:"Delete"})]})]},e.key)}))}var w=function(e){var t=e.fields,n=e.book,a=e.currentPage,r=e.setCurrentContact;return Object(o.jsx)("div",{className:"table-responsive",children:Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)("thead",{children:Object(o.jsx)("tr",{children:t.map((function(e){return Object(o.jsx)("th",{scope:"col",children:e.label},e.key)}))})}),Object(o.jsx)("tbody",{children:n.length>0&&n[a]&&n[a].length>0?Object(o.jsx)(C,{fields:t,book:n,currentPage:a,setCurrentContact:r}):Object(o.jsx)("tr",{children:Object(o.jsx)("td",{colSpan:"7",children:"No Contacts"})})})]})})};var P=function(e){var t=e.contact,n=e.deleteContact;return Object(o.jsx)("div",{className:"modal fade",id:"confirmDelete",tabIndex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true",children:Object(o.jsx)("div",{className:"modal-dialog",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsxs)("h5",{className:"modal-title",id:"confirmDeleteLabel",children:[t.name," ",t.surname]}),Object(o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(o.jsx)("div",{className:"modal-body",children:"Are you sure to delete?"}),Object(o.jsxs)("div",{className:"modal-footer",children:[Object(o.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(o.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:case"end":return e.stop()}}),e)}))),children:"Remove"})]})]})})})};var S=function(){return Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border m-5",role:"status",children:Object(o.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},D=new x("https://my-json-server.typicode.com","/kholehk/Contacts/index");var F=function(e){var t=e.container,n=e.fields,r=e.currentPage,c=(e.setCurrentPage,e.currentContact),s=e.setCurrentContact,l=Object(a.useState)([]),u=Object(i.a)(l,2),b=u[0],f=u[1],m=Object(a.useState)([]),p=Object(i.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)(!0),y=Object(i.a)(v,2),g=y[0],C=y[1],N=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,t();case 3:C(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function F(){return(F=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.create(t);case 2:n=e.sent,x([].concat(Object(d.a)(O),[n]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return I.apply(this,arguments)}function I(){return(I=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.read();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.update(t);case 2:n=e.sent,x(O.map((function(e){return e.id===n.id?n:e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,D.delete(n);case 3:x(O.filter((function(e){return e.id!==n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){N(E)}),[]),Object(a.useEffect)((function(){f(function(e){return e.reduce((function(e,t,n){var a=Math.floor(n/10);return a===e.length&&e.push([]),e[a].push(t),e}),[])}(O))}),[O]);var A=function(e){return!Object.keys(e).length};return Object(o.jsxs)("main",{className:t,children:[Object(o.jsx)(k,{title:A(c)?"Add contact":"Edit contact",fields:n,currentContact:c,submitContact:A(c)?function(e){return F.apply(this,arguments)}:function(e){return _.apply(this,arguments)}}),g?Object(o.jsx)(S,{}):Object(o.jsx)(w,{fields:n,book:b,currentPage:r,setCurrentContact:s}),Object(o.jsx)(P,{contact:c,deleteContact:function(e){return L.apply(this,arguments)}})]})};function E(e){var t=e.title,n=e.condition,a=e.page,r=e.setCurrentPage;return Object(o.jsx)("li",{className:"page-item"+(n?" disabled":""),children:Object(o.jsx)("a",{className:"page-link",href:"./?page=".concat(n?"":a),tabIndex:n?"-1":"","aria-disabled":n,onClick:function(e){e.preventDefault(),r(a)},children:t})})}var I=function(e){var t=e.container,n=e.firstPage,r=e.lastPage,c=e.currentPage,s=e.setCurrentPage,l=Object(a.useState)(n),u=Object(i.a)(l,2),d=u[0],b=u[1],j=Object(a.useState)(r),h=Object(i.a)(j,2),f=h[0],m=h[1];return Object(a.useEffect)((function(){b(c-1),m(c+1)}),[c]),Object(o.jsx)("footer",{className:t,children:Object(o.jsx)("nav",{"aria-label":"Pagination",children:Object(o.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(o.jsx)(E,{title:"Previous",condition:c===n,page:d,setCurrentPage:s}),Object(o.jsx)(E,{title:"Next",condition:c===r,page:f,setCurrentPage:s})]})})})},_="container-lg",L=[{key:"name",label:"Name"},{key:"surname",label:"Surname"},{key:"birthday",label:"Birthday",type:"date"},{key:"phone",label:"Phone",type:"tel"},{key:"email",label:"Email",type:"email"},{key:"createAt",label:"Create/Update",type:"datetime-local",calculate:function(e){return e}}];var A=function(){var e=Object(a.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)({}),l=Object(i.a)(s,2),d=l[0],b=l[1];return Object(o.jsxs)(r.a.StrictMode,{children:[Object(o.jsx)(u,{container:_,fields:L,setCurrentContact:b}),Object(o.jsx)(F,{container:_,fields:L,currentPage:n,setCurrentPage:c,currentContact:d,setCurrentContact:b}),Object(o.jsx)(I,{container:_,firstPage:0,lastPage:2,currentPage:n,setCurrentPage:c})]})};n(48);s.a.render(Object(o.jsx)(A,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.a9718c58.chunk.js.map