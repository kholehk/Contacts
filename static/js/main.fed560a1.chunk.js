(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{24:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);n(24);var a=n(1),c=n.n(a),r=n(21),s=n.n(r),i=n(11),o=n(2),l=n.n(o),u=n(3),d=n(5),b=n(22),j=n(23),f=n(8),h=n.n(f),m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(b.a)(this,e),this.origin=t,this.pathname=n}return Object(j.a)(e,[{key:"origin",get:function(){return this._origin},set:function(e){this._origin=this._origin||e}},{key:"pathname",get:function(){return this._pathname},set:function(e){this._pathname=this._pathname||e}},{key:"href",get:function(){return this.origin+this.pathname}},{key:"create",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post(this.href,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.prev=1,e.next=4,h.a.get("".concat(this.href,"/").concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.put("".concat(this.href,"/").concat(t.id),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("".concat(this.href,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.status);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),p=n(6),O=n(0);var v=function(e){var t=e.fields,n=e.contacts,c=e.setContacts,r=Object(a.useState)({key:t[0].key,value:""}),s=Object(d.a)(r,2),o=s[0],l=s[1];return Object(O.jsxs)("form",{className:"d-flex",children:[Object(O.jsx)("select",{className:"form-select","aria-label":"contactsProperties",onChange:function(e){return function(e){var t=e.target.options,n=Object(i.a)(t).find((function(e){return e.selected}));l(Object(p.a)(Object(p.a)({},o),{},{key:n.dataset.key,type:n.dataset.type}))}(e)},children:t.map((function(e){return Object(O.jsx)("option",{"data-key":e.key,"data-type":e.type,children:e.label},e.key)}))}),Object(O.jsx)("input",{className:"form-control me-2",placeholder:"Search","aria-label":"Search",type:o.type||"search",name:o.key,value:o.value,onChange:function(e){return function(e){var t=e.target.value;l(Object(p.a)(Object(p.a)({},o),{},{value:t}))}(e)}}),Object(O.jsx)("button",{className:"btn btn-outline-success",type:"submit",onClick:function(e){e.preventDefault();var t=n.filter((function(e){return e[o.key]===o.value}));c(null!==t&&void 0!==t?t:[])},children:"Search"})]})};var x=function(e){var t=e.container,n=e.fields,a=e.contacts,c=e.setContacts,r=e.setCurrentContact;return Object(O.jsx)("header",{className:t,children:Object(O.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)("a",{className:"navbar-brand",href:"./",children:"Contacts"}),Object(O.jsx)(v,{fields:n,contacts:a,setContacts:c}),Object(O.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){return r({})},"data-bs-toggle":"modal","data-bs-target":"#contactForm",children:"New contact"})]})})})};function y(e){var t=e.fields,n=e.contactsOnPage,a=e.setCurrentContact;return n.map((function(e){return Object(O.jsx)("tr",{children:Object(O.jsx)(g,{fields:t,contact:e,setCurrentContact:a})},e.id)}))}function g(e){var t=e.fields,n=e.contact,a=e.setCurrentContact;return t.map((function(e,t){return t?Object(O.jsx)("td",{children:e.calculate&&e.calculate instanceof Function?e.calculate(n[e.key]):n[e.key]},e.key):Object(O.jsxs)("th",{scope:"row",children:[Object(O.jsx)("strong",{className:"row mx-1",children:n[e.key]}),Object(O.jsxs)("div",{className:"row flex-nowrap mx-1",onClick:function(){return a(n)},children:[Object(O.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#contactForm",className:"btn btn-sm btn-primary col-auto",children:"Edit"}),Object(O.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#confirmDelete",className:"btn btn-sm btn-danger col-auto mx-1",children:"Delete"})]})]},e.key)}))}var k=function(e){var t=e.fields,n=e.contactsOnPage,a=e.setCurrentContact;return Object(O.jsx)("div",{className:"table-responsive",children:Object(O.jsxs)("table",{className:"table",children:[Object(O.jsx)("thead",{children:Object(O.jsx)("tr",{children:t.map((function(e){return Object(O.jsx)("th",{scope:"col",children:e.label},e.key)}))})}),Object(O.jsx)("tbody",{children:Array.isArray(n)&&n.length?Object(O.jsx)(y,{fields:t,contactsOnPage:n,setCurrentContact:a}):Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:"7",children:"No Contacts"})})})]})})};var C=function(){return Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("div",{className:"spinner-border m-5",role:"status",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})};var N=function(e){var t=e.container,n=e.fields,a=e.contactsOnPage,c=e.setCurrentContact,r=e.isLoading;return Object(O.jsx)("main",{className:t,children:r?Object(O.jsx)(C,{}):Object(O.jsx)(k,{fields:n,contactsOnPage:a,setCurrentContact:c})})};var w={};function P(e){var t=e.title,n=e.condition,c=e.page,r=e.setCurrentPage;w[t]=Object(a.useRef)();var s=Object.keys(w).find((function(e){return e!==t})),i={className:"page-link",href:"./?page=".concat(!n&&c),onClick:function(e){e.preventDefault(),r(c)},ref:w[t]};return n&&(i.tabIndex="-1",i["aria-disabled"]="true",s&&w[s].current&&w[s].current.focus()),Object(O.jsx)("li",{className:"page-item"+(n?" disabled":""),children:Object(O.jsx)("a",Object(p.a)(Object(p.a)({},i),{},{children:t}))})}var S=function(e){var t=e.container,n=e.firstPage,c=e.lastPage,r=e.currentPage,s=e.setCurrentPage,i=Object(a.useState)(r-1),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(a.useState)(r+1),j=Object(d.a)(b,2),f=j[0],h=j[1];return Object(a.useEffect)((function(){u(r-1),h(r+1)}),[r]),Object(O.jsx)("footer",{className:t,children:Object(O.jsx)("nav",{"aria-label":"Pagination",children:Object(O.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(O.jsx)(P,{title:"Previous",condition:r===n||c<=n,page:l,setCurrentPage:s}),Object(O.jsx)(P,{title:"Next",condition:r===c||c<=n,page:f,setCurrentPage:s})]})})})},D=n(10);var F=function(e){var t=e.field,n=e.contact,a=e.handleInputChange;return Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",htmlFor:t.key,children:t.label}),Object(O.jsx)("input",{type:t.type||"text",className:"form-control",id:t.key,name:t.key,value:n[t.key],onChange:function(e){return a(e)},"aria-describedby":t.label})]})};var E=function(e){var t=e.title,n=e.fields,c=e.currentContact,r=e.submitContact,s=Object(a.useCallback)((function(e){return n.reduce((function(t,n){return t[n.key]=e[n.key]||"",t}),{id:c.id||null})}),[c,n]),i=Object(a.useState)(s(c)),o=Object(d.a)(i,2),b=o[0],j=o[1];function f(e){var t=e.target,n=t.name,a=t.value;j(Object(p.a)(Object(p.a)({},b),{},Object(D.a)({},n,a)))}return Object(a.useEffect)((function(){return j(s(c))}),[c,s]),Object(O.jsx)("div",{className:"modal fade",id:"contactForm",tabIndex:"-1","aria-labelledby":"contactFormLabel","aria-hidden":"true",children:Object(O.jsx)("form",{id:"contactFormDialog",className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("h5",{className:"modal-title",id:"contactFormLabel",children:t}),Object(O.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(O.jsx)("div",{className:"modal-body",children:n.map((function(e){return e.calculate?"":Object(O.jsx)(F,{field:e,contact:b,handleInputChange:f},e.key)}))}),Object(O.jsxs)("div",{className:"modal-footer",children:[Object(O.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(O.jsx)("button",{formTarget:"contactFormDialog",type:"submit",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,r(Object(p.a)(Object(p.a)({},b),{},{createAt:Date.now()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:t})]})]})})})};var L=function(e){var t=e.contact,n=e.deleteContact;return Object(O.jsx)("div",{className:"modal fade",id:"confirmDelete",tabIndex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true",children:Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsxs)("h5",{className:"modal-title",id:"confirmDeleteLabel",children:[t.name," ",t.surname]}),Object(O.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(O.jsx)("div",{className:"modal-body",children:"Are you sure to delete?"}),Object(O.jsxs)("div",{className:"modal-footer",children:[Object(O.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(O.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:case"end":return e.stop()}}),e)}))),children:"Remove"})]})]})})})},A=new m("https://my-json-server.typicode.com","/kholehk/Contacts/index"),I="container-lg",_=[{key:"name",label:"Name"},{key:"surname",label:"Surname"},{key:"birthday",label:"Birthday",type:"date"},{key:"phone",label:"Phone",type:"tel"},{key:"email",label:"Email",type:"email"},{key:"createAt",label:"Create/Update",type:"datetime-local",calculate:function(e){return e}}];var B=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)({}),o=Object(d.a)(s,2),b=o[0],j=o[1],f=Object(a.useState)([]),h=Object(d.a)(f,2),m=h[0],p=h[1],v=Object(a.useState)(0),y=Object(d.a)(v,2),g=y[0],k=y[1],C=Object(a.useState)(!0),w=Object(d.a)(C,2),P=w[0],D=w[1],F=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,t();case 3:D(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function B(){return(B=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.create(t);case 2:a=e.sent,r([].concat(Object(i.a)(n),[a]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.read();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.update(t);case 2:a=e.sent,r(n.map((function(e){return e.id===a.id?a:e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,A.delete(a);case 3:r(n.filter((function(e){return e.id!==a})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){F(J)}),[]),Object(a.useEffect)((function(){p(function(e){return e.reduce((function(e,t,n){var a=Math.floor(n/10);return a===e.length&&e.push([]),e[a].push(t),e}),[])}(n))}),[n]);var U=function(e){return!Object.keys(e).length};return Object(O.jsxs)(c.a.StrictMode,{children:[Object(O.jsx)(x,{container:I,fields:_,contacts:n,setContacts:r,setCurrentContact:j}),Object(O.jsx)(N,{container:I,fields:_,contactsOnPage:m[g],setCurrentContact:j,isLoading:P}),Object(O.jsx)(S,{container:I,firstPage:0,lastPage:m.length-1,currentPage:g,setCurrentPage:k}),Object(O.jsx)(E,{fields:_,title:U(b)?"Add contact":"Edit contact",currentContact:b,submitContact:U(b)?function(e){return B.apply(this,arguments)}:function(e){return R.apply(this,arguments)}}),Object(O.jsx)(L,{contact:b,deleteContact:function(e){return T.apply(this,arguments)}})]})};s.a.render(Object(O.jsx)(B,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.fed560a1.chunk.js.map