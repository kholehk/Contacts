(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{33:function(t,e,n){},81:function(t,e,n){"use strict";n.r(e);n(33);var a=n(1),c=n.n(a),r=n(29),s=n.n(r),i=n(14),o=n(2),l=n.n(o),u=n(4),d=n(7),b=n(32),j=n.n(b),f=n(30),h=n(31),m=n(12),p=n.n(m),O=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(f.a)(this,t),this.origin=e,this.pathname=n}return Object(h.a)(t,[{key:"origin",get:function(){return this._origin},set:function(t){this._origin=this._origin||t}},{key:"pathname",get:function(){return this._pathname},set:function(t){this._pathname=this._pathname||t}},{key:"href",get:function(){return this.origin+this.pathname}},{key:"create",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.post(this.href,e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,a=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"",t.prev=1,t.next=4,p.a.get("".concat(this.href,"/").concat(e));case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.put("".concat(this.href,"/").concat(e.id),e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.delete("".concat(this.href,"/").concat(e));case 3:return n=t.sent,t.abrupt("return",n.status);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),v=n(3),y=n(0);var x=function(t){var e=t.fields,n=t.contacts,c=t.setContacts,r=Object(a.useState)({key:e[0].key,value:""}),s=Object(d.a)(r,2),o=s[0],l=s[1];return Object(y.jsxs)("form",{className:"d-flex",children:[Object(y.jsx)("select",{className:"form-select","aria-label":"contactsProperties",onChange:function(t){return function(t){var e=t.target.options,n=Object(i.a)(e).find((function(t){return t.selected}));l(Object(v.a)(Object(v.a)({},o),{},{key:n.dataset.key,type:n.dataset.type}))}(t)},children:e.map((function(t){return Object(y.jsx)("option",{"data-key":t.key,"data-type":t.type,children:t.label},t.key)}))}),Object(y.jsx)("input",{className:"form-control me-2",placeholder:"Search","aria-label":"Search",type:o.type||"search",name:o.key,value:o.value,onChange:function(t){return function(t){var e=t.target.value;l(Object(v.a)(Object(v.a)({},o),{},{value:e}))}(t)}}),Object(y.jsx)("button",{className:"btn btn-outline-success",type:"submit",onClick:function(t){t.preventDefault();var a=e.reduce((function(t,e){var n=e.key,a=e.calculate;return n!==t.key?t:a&&a instanceof Function?Object(v.a)(Object(v.a)({},t),{},{value:a(t.value,null,!1)}):t}),o),r=n.filter((function(t){return t[a.key]===a.value}));c(null!==r&&void 0!==r?r:[])},children:"Search"})]})};var g=function(t){var e=t.container,n=t.fields,a=t.contacts,c=t.setContacts,r=t.setCurrentContact;return Object(y.jsx)("header",{className:e,children:Object(y.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(y.jsxs)("div",{className:"container-fluid",children:[Object(y.jsx)("a",{className:"navbar-brand",href:"./",children:"Contacts"}),Object(y.jsx)(x,{fields:n,contacts:a,setContacts:c}),Object(y.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){return r({})},"data-bs-toggle":"modal","data-bs-target":"#contactForm",children:"New contact"})]})})})};function k(t){var e=t.fields,n=t.contactsOnPage,a=t.setCurrentContact;return n.map((function(t){return Object(y.jsx)("tr",{children:Object(y.jsx)(C,{fields:e,contact:t,setCurrentContact:a})},t.id)}))}function C(t){var e=t.fields,n=t.contact,a=t.setCurrentContact;return e.map((function(t,e){return e?Object(y.jsx)("td",{children:t.calculate&&t.calculate instanceof Function?t.calculate(n[t.key]):n[t.key]},t.key):Object(y.jsxs)("th",{scope:"row",children:[Object(y.jsx)("strong",{className:"row mx-1",children:n[t.key]}),Object(y.jsxs)("div",{className:"row flex-nowrap mx-1",onClick:function(){return a(n)},children:[Object(y.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#contactForm",className:"btn btn-sm btn-primary col-auto",children:"Edit"}),Object(y.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#confirmDelete",className:"btn btn-sm btn-danger col-auto mx-1",children:"Delete"})]})]},t.key)}))}var N=function(t){var e=t.fields,n=t.contactsOnPage,a=t.setCurrentContact;return Object(y.jsx)("div",{className:"table-responsive",children:Object(y.jsxs)("table",{className:"table",children:[Object(y.jsx)("thead",{children:Object(y.jsx)("tr",{children:e.map((function(t){return Object(y.jsx)("th",{scope:"col",children:t.label},t.key)}))})}),Object(y.jsx)("tbody",{children:Array.isArray(n)&&n.length?Object(y.jsx)(k,{fields:e,contactsOnPage:n,setCurrentContact:a}):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"7",children:"No Contacts"})})})]})})};var w=function(){return Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)("div",{className:"spinner-border m-5",role:"status",children:Object(y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})};var P=function(t){var e=t.container,n=t.fields,a=t.contactsOnPage,c=t.setCurrentContact,r=t.isLoading;return Object(y.jsx)("main",{className:e,children:r?Object(y.jsx)(w,{}):Object(y.jsx)(N,{fields:n,contactsOnPage:a,setCurrentContact:c})})};var S={};function D(t){var e=t.title,n=t.condition,c=t.page,r=t.setCurrentPage;S[e]=Object(a.useRef)();var s=Object.keys(S).find((function(t){return t!==e})),i={className:"page-link",href:"./?page=".concat(!n&&c),onClick:function(t){t.preventDefault(),r(c)},ref:S[e]};return n&&(i.tabIndex="-1",i["aria-disabled"]="true",s&&S[s].current&&S[s].current.focus()),Object(y.jsx)("li",{className:"page-item"+(n?" disabled":""),children:Object(y.jsx)("a",Object(v.a)(Object(v.a)({},i),{},{children:e}))})}var F=function(t){var e=t.container,n=t.firstPage,c=t.lastPage,r=t.currentPage,s=t.setCurrentPage,i=Object(a.useState)(r-1),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(a.useState)(r+1),j=Object(d.a)(b,2),f=j[0],h=j[1];return Object(a.useEffect)((function(){u(r-1),h(r+1)}),[r]),Object(y.jsx)("footer",{className:e,children:Object(y.jsx)("nav",{"aria-label":"Pagination",children:Object(y.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(y.jsx)(D,{title:"Previous",condition:r===n||c<=n,page:l,setCurrentPage:s}),Object(y.jsx)(D,{title:"Next",condition:r===c||c<=n,page:f,setCurrentPage:s})]})})})},E=n(10);var M=function(t){var e=t.field,n=t.contact,a=t.handleInputChange;return Object(y.jsxs)("div",{className:"mb-3",children:[Object(y.jsx)("label",{className:"form-label",htmlFor:e.key,children:e.label}),Object(y.jsx)("input",{type:e.type,className:"form-control",id:e.key,name:e.key,value:n[e.key],onChange:function(t){return a(t)},"aria-describedby":e.label})]})};var L=function(t){var e=t.title,n=t.fields,c=t.currentContact,r=t.submitContact,s=Object(a.useCallback)((function(t){var e;return n.reduce((function(e,n){var a,c=n.key,r=n.calculate;return n.auto||(e[c]=r&&r instanceof Function?r(t[c],"yyyy-MM-dd"):t[c],e[c]=null!==(a=e[c])&&void 0!==a?a:""),e}),{id:null!==(e=c.id)&&void 0!==e?e:null})}),[c,n]),i=Object(a.useState)(s(c)),o=Object(d.a)(i,2),b=o[0],j=o[1];function f(t){var e=t.target,n=e.name,a=e.value;j(Object(v.a)(Object(v.a)({},b),{},Object(E.a)({},n,a)))}return Object(a.useEffect)((function(){return j(s(c))}),[c,s]),Object(y.jsx)("div",{className:"modal fade",id:"contactForm",tabIndex:"-1","aria-labelledby":"contactFormLabel","aria-hidden":"true",children:Object(y.jsx)("form",{id:"contactFormDialog",className:"modal-dialog",children:Object(y.jsxs)("div",{className:"modal-content",children:[Object(y.jsxs)("div",{className:"modal-header",children:[Object(y.jsx)("h5",{className:"modal-title",id:"contactFormLabel",children:e}),Object(y.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(y.jsx)("div",{className:"modal-body",children:n.map((function(t){return t.auto?"":Object(y.jsx)(M,{field:t,contact:b,handleInputChange:f},t.key)}))}),Object(y.jsxs)("div",{className:"modal-footer",children:[Object(y.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(y.jsx)("button",{formTarget:"contactFormDialog",type:"submit",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){var t=Object(u.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),a=n.reduce((function(t,e){var n=e.key,a=e.auto,c=e.calculate;return a&&a instanceof Function?Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},n,a())):c&&c instanceof Function?Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},n,c(t[n],null,!1))):t}),b),t.next=4,r(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:e})]})]})})})};var I=function(t){var e=t.contact,n=t.deleteContact;return Object(y.jsx)("div",{className:"modal fade",id:"confirmDelete",tabIndex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true",children:Object(y.jsx)("div",{className:"modal-dialog",children:Object(y.jsxs)("div",{className:"modal-content",children:[Object(y.jsxs)("div",{className:"modal-header",children:[Object(y.jsxs)("h5",{className:"modal-title",id:"confirmDeleteLabel",children:[e.name," ",e.surname]}),Object(y.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(y.jsx)("div",{className:"modal-body",children:"Are you sure to delete?"}),Object(y.jsxs)("div",{className:"modal-footer",children:[Object(y.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(y.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e);case 2:case"end":return t.stop()}}),t)}))),children:"Remove"})]})]})})})},_=new O("https://my-json-server.typicode.com","/kholehk/Contacts/index"),A="container-lg",B=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?j()(+(null!==t&&void 0!==t?t:Date.now()),e):new Date(t).getTime()},J=[{key:"name",label:"Name",type:"text"},{key:"surname",label:"Surname",type:"text"},{key:"birthday",label:"Birthday",type:"date",calculate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd.MM.yyyy",n=arguments.length>2?arguments[2]:void 0;return B(t,e,n)}},{key:"phone",label:"Phone",type:"tel"},{key:"email",label:"Email",type:"email"},{key:"createAt",label:"Create/Update",type:"datetime-local",auto:function(){return Date.now()},calculate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd.MM.yyyy hh:mm",n=arguments.length>2?arguments[2]:void 0;return B(t,e,n)}}];var R=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],s=Object(a.useState)({}),o=Object(d.a)(s,2),b=o[0],j=o[1],f=Object(a.useState)([]),h=Object(d.a)(f,2),m=h[0],p=h[1],O=Object(a.useState)(0),v=Object(d.a)(O,2),x=v[0],k=v[1],C=Object(a.useState)(!0),N=Object(d.a)(C,2),w=N[0],S=N[1],D=function(){var t=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.next=3,e();case 3:S(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function E(){return(E=Object(u.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.create(e);case 2:a=t.sent,r([].concat(Object(i.a)(n),[a]));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.read();case 2:e=t.sent,r(e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.update(e);case 2:a=t.sent,r(n.map((function(t){return t.id===a.id?a:t})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=Object(u.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,t.next=3,_.delete(a);case 3:r(n.filter((function(t){return t.id!==a})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){D(M)}),[]),Object(a.useEffect)((function(){p(function(t){return t.reduce((function(t,e,n){var a=Math.floor(n/10);return a===t.length&&t.push([]),t[a].push(e),t}),[])}(n))}),[n]);var U=function(t){return!Object.keys(t).length};return Object(y.jsxs)(c.a.StrictMode,{children:[Object(y.jsx)(g,{container:A,fields:J,contacts:n,setContacts:r,setCurrentContact:j}),Object(y.jsx)(P,{container:A,fields:J,contactsOnPage:m[x],setCurrentContact:j,isLoading:w}),Object(y.jsx)(F,{container:A,firstPage:0,lastPage:m.length-1,currentPage:x,setCurrentPage:k}),Object(y.jsx)(L,{fields:J,title:U(b)?"Add contact":"Edit contact",currentContact:b,submitContact:U(b)?function(t){return E.apply(this,arguments)}:function(t){return R.apply(this,arguments)}}),Object(y.jsx)(I,{contact:b,deleteContact:function(t){return T.apply(this,arguments)}})]})};s.a.render(Object(y.jsx)(R,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.ae05d42c.chunk.js.map